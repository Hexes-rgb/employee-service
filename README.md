# Документация
-------------

## Makefile
Установить `make` если не установлен в системе, создать .env

```bash
make build # Сборка образа.
make up # Запуск контейнеров.
make down # Остановка контейнеров.
make restart # Перезапуск контейнеров.
make clear # Удаление контейнеров, образов и томов.
make test # Запуск тестов.
```

## Employee Service API

Это API для управления сотрудниками и департаментами в сервисе сотрудников. Ниже представлена краткая информация о доступных эндпоинтах и их использовании.

## Доступные эндпоинты

### Департаменты

- **POST /department**
  - **Описание:** Получить или создать департамент.
  - **Тело запроса:** 
    ```json
    {
      "companyId": 1,
      "name": "Engineering",
      "phone": "+123456789"
    }
    ```
  - **Ответы:**
    - `200 OK`: Успешная операция, возвращает ID департамента.
    - `400 Bad Request`: Неверный запрос.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

- **GET /department/{id}**
  - **Описание:** Получить департамент по ID.
  - **Параметры пути:** `id` - ID департамента.
  - **Ответы:**
    - `200 OK`: Возвращает данные департамента.
    - `400 Bad Request`: Неверный ID департамента.
    - `404 Not Found`: Департамент не найден.

### Сотрудники

- **POST /employee**
  - **Описание:** Создать сотрудника.
  - **Тело запроса:** 
    ```json
    {
      "name": "Иван",
      "surname": "Иванов",
      "phone": "+123456789",
      "companyId": 1,
      "departmentId": 2,
      "passportType": "Паспорт РФ",
      "passportNumber": "1234567890"
    }
    ```
  - **Ответы:**
    - `201 Created`: Успешное создание сотрудника, возвращает ID.
    - `400 Bad Request`: Неверный запрос.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

- **GET /employee/{id}**
  - **Описание:** Получить данные сотрудника по ID.
  - **Параметры пути:** `id` - ID сотрудника.
  - **Ответы:**
    - `200 OK`: Возвращает данные сотрудника.
    - `400 Bad Request`: Неверный ID сотрудника.
    - `404 Not Found`: Сотрудник не найден.

- **PUT /employee/{id}**
  - **Описание:** Обновить данные сотрудника по ID.
  - **Параметры пути:** `id` - ID сотрудника.
  - **Тело запроса:** См. [POST /employee](#post-employee).
  - **Ответы:**
    - `200 OK`: Успешное обновление.
    - `400 Bad Request`: Неверный запрос.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

- **DELETE /employee/{id}**
  - **Описание:** Удалить сотрудника по ID.
  - **Параметры пути:** `id` - ID сотрудника.
  - **Ответы:**
    - `200 OK`: Успешное удаление.
    - `400 Bad Request`: Неверный ID сотрудника.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

- **GET /company/{companyId}/employees**
  - **Описание:** Получить сотрудников компании.
  - **Параметры пути:** `companyId` - ID компании.
  - **Ответы:**
    - `200 OK`: Возвращает список сотрудников.
    - `400 Bad Request`: Неверный ID компании.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

- **GET /company/{companyId}/department/{departmentId}/employees**
  - **Описание:** Получить сотрудников департамента.
  - **Параметры пути:** `companyId` - ID компании, `departmentId` - ID департамента.
  - **Ответы:**
    - `200 OK`: Возвращает список сотрудников.
    - `400 Bad Request`: Неверный ID компании или департамента.
    - `500 Internal Server Error`: Внутренняя ошибка сервера.

## Полная спецификация

Полную спецификацию API в формате OpenAPI вы можете найти в файле [openapi.yaml](docs/openapi.yaml).

---

